<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <!-- スマホで見やすくする設定 -->
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" type="text/css" href="list_stylesheet.css">
    
    <!-- ブラウザのタブに表示されるタイトル -->
    <title>みんなの投稿</title>
    <ul class="mypage-post-tab">
      <!--<li class="js-mypage-tab">-->
      <!--  <img src="img/icon/login.png" class="mypage-tab-img">-->
      <!--</li>-->
      <li class="js-mypage-tab">
        <!--<img src="img/icon/go_sum.png" class="mypage-tab-img">-->
      </li>
      <li class="js-mypage-tab-me">
        <!--<img src="img/icon/dis.png" class="mypage-tab-img">-->
      </li>
      <li class="js-mypage-tab-stock">
        <!--<img src="img/icon/tab.png" class="mypage-tab-img">-->
      </li>
      <li id="menu" class="js-mypage-tab-me">
		<div><a href="#menu" class="menuopen"><img src="img/icon/tab.png" class="mypage-tab-img"></a><a href="#close" class="menuclose"><img src="img/icon/tab.png" class="mypage-tab-img"></div>
		<ul id = "cad">
		</ul>
	</li>
    </ul>
 </head>
 
<body>
    <ul id="list" class="photo-list">
    </ul>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    
    
    
    <script>
        $.urlParam = function(name) {
        var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
            if (results == null) {
                return "";
            } else {
                return decodeURI(results[1]) || "";
            }
        }
        var lat = $.urlParam('lat');
        var lon = $.urlParam('lon');

        var category_id = $.urlParam('category_id');
        console.log(category_id);

        // var url = "/instaglam/list_screen.html?lon=" + lon + "&lat=" lat + "&category_id=" + 

        $.ajax({
            url: "/instaglam/api/get_image_db.php?user_post=" + lon + "%20" + lat + "&category_id=" + category_id,
            dataType: "json"
            }).done(function(data) {

            for (var i = 0, len = data.length; i < len; ++i) {
                var article = "<li>\
                     <a  href='/instaglam/detail_screen.html?post_id=" + data[i].post_id + "' style='background-image:url(" + data[i].img_url + ")'  class='photo-list-img' ></a>\
                     </li>";
                $("#list").append(article);
            }
        })
        $.ajax({
                    url: "/instaglam/api/get_category.php",
                    dataType: "json"
                    }).done(function(data) {
                    for (var i = 0, len = data.length; i < len; ++i) {
                        <li><a>店舗</a></li>
                        var category_link = "<li>\
                             <a  href='/instaglam/list_screen.html?lon=" + lon + "%20" + lat + "&category_id=" + data[i].category_id + "'>" + data[i].category_name + "</a>\
                             </li>";
                        $("#cad").append(category_link);
                    }
                })
            </script>
</body>
</html>