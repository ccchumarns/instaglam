<!DOCTYPE html>
<html lang="ja">
  <head>
      <meta charset="utf-8">
      <!-- スマホで見やすくする設定 -->
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <link rel="stylesheet" type="text/css" href="post_stylesheet.css">
      
      <!-- ブラウザのタブに表示されるタイトル -->
      <title>投稿画面</title>
      <button type="button" onclick="history.back()"><h3>戻る</h3></button>
  </head>
  <body>
      <form action="" method="post" enctype="multipart/form-data">
        <div>
          <label for="title">Title:</label>
          <input type="title" id="title" name="title">
        </div>
        <input type="file" name="upload_file" id="upload_file" class="data file" />
        <br /><br />
        <span id="preview_area">
          <img id='preview' width= auto height="220" src="img/icon/JPG.png" >
          </div>
        </span> 
        <br /><br />
        <div>
          <label for="desc">Description:</label>
          <textarea id="desc" name="user_message"></textarea>
        </div>
        <div>
          <label for="price">Price:</label>
          <input type="price" id="price" name="price">
        </div>
        <input type="radio" name="categoly" value="leisure">レジャー
        <input type="radio" name="categoly" value="shop">店舗
        <br /><br />
        <input type="submit" value="送信" />
        <br /><br />
      </form>
      
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
      
      <script>
        $('#upload_file').on('change', function(){
          var strFileInfo = $('#upload_file')[0].files[0];
          if(strFileInfo && strFileInfo.type.match('image.*')){ 
      
            $('#preview').remove();
            $('#preview_area').append('<img id="preview" width= auto height="220" />'); 
      
            fileReader = new FileReader(); 
            fileReader.onload = function(event){
              $('#preview').attr('src', event.target.result);
            }
      
            fileReader.readAsDataURL(strFileInfo); 
          }
        });
      </script>
  </body>
<html>